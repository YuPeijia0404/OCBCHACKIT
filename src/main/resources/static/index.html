<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8">
    <title>ticket booking</title>
    <script src="webjars/jquery/3.5.0/jquery.min.js"></script>
    <style type="text/css">
        .block{text-align: center; margin-bottom: 20px;margin-top: 20px}
    </style>
</head>
<body>
<div>
    <div class="block">
        <input class="seat" type="button" id="1" value="01" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="2" value="02" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="3" value="03" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="4" value="04" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="5" value="05" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
    </div>
    <div class="block">
        <input class="seat" type="button" id="6" value="06" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="7" value="07" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="8" value="08" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="9" value="09" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="10" value="10" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
    </div>
    <div class="block">
        <input class="seat" type="button" id="11" value="11" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="12" value="12" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="13" value="13" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="14" value="14" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="15" value="15" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
    </div>
    <div class="block">
        <input class="seat" type="button" id="16" value="16" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="17" value="17" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="18" value="18" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="19" value="19" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
        <input class="seat" type="button" id="20" value="20" style="margin-right: 5px" onclick="choose(this.id);this.disabled ='disabled'">
    </div>
    <div>
        <dialog>
            <div>
                <form>
                    <p>Name: <input type="text" id="username" required lay-verify="required"/></p>
                    <p>Email: <input type="text" id="email" required lay-verify="required"/></p>
                    <input type="button" value="Confirm" onclick="confirmation()"/>
                    <button id="close_dialog">Cancel</button>
                </form>
            </div>
        </dialog>
    </div>
</div>
</body>
</html>

<script type="text/javascript">

    function choose(element){
        let dialog = document.getElementsByTagName("dialog")[0];
        let closeDialog = document.getElementById("close_dialog");
        dialog.showModal();
        $.ajax({
            url: "/email/id",
            type: "post",
            dataType: "json",
            data : {
                "id": element,
            },
        });

        closeDialog.onclick = function(){
            dialog.close();
        }
    }

    function confirmation(){
        let dialog = document.getElementsByTagName("dialog")[0];
        let username = $("#username").val();
        let email = $("#email").val();
        $.ajax({
            url: "/email/send",
            type: "post",
            dataType: "json",
            data : {
                "email": email,
                "username": username,
            },
        });
        dialog.close();
    }
</script>